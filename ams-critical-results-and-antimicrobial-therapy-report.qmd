---
title: "Analysis of Critical-Flagged Blood Cultures and Antimicrobial Prescriptions Data" 
subtitle: "Automated Analysis of Antimicrobial Prescriptions & Laboratory Data using R" 
institute: "Newcastle upon Tyne Hospitals NHS Foundation Trust"
author: "Daniel Weiand; Jamie Lupton; Peta Leroux" 
# date: "`r format(Sys.time(), '%a %B %d %Y')`"
date: today
date-format: "dddd, D MMMM YYYY"
self-contained: true

#Some options need to be set in format > html
format:
  html:
    #output-file: 'file' #Output file to write to
    #output-ext: #Extension to use for generated output file
    page-layout: full # By default Quarto HTML documents display content centered at a width optimized for readability (typically from 600px to 900px wide). https://quarto.org/docs/output-formats/page-layout.html 
    grid: # There are four variables to control the four components of the layout: the sidebar, the body, the margin, and the gutters.
      sidebar-width: 10px # 250px (sidebar is on left)
      body-width: 1000px # 800px
      margin-width: 200px # 250px (margin is on right)
      gutter-width: 1.0em # 1.5em
    code-fold: false
    code_download: true
    embed-resources: true
    standalone: true
    toc: true #Include an automatically generated table of contents. This option has no effect if standalone is false.
    toc-depth: 2 #Specify the number of section levels to include in the table of contents. The default is 3
    toc_float: TRUE
    highlight-style: pygments
    fig-path: 'figures/'
    #fig-width: 9 #default is 7
    fig-asp: 0.618 #When fig-asp is specified, the height of a plot (the option fig-height) is calculated from fig-width * fig-asp (the golden ratio is 0.618).
    # fig-height: 6 #default is 7
    fig-align: 'left' #Possible values are default, left, right, and center.
    fig-format: 'svg' #The graphical device to generate plot files. retina, png, jpeg, svg, or pdf
    fig-cap-location: 'top' #top bottom or margin
    fig-dpi: 300 #The DPI (dots per inch) for bitmap devices (default = 72)
    df-print: paged #kable, tibble or paged. The default printing method is kable.
    theme:
    - mystyle.scss
    - default #Quarto includes 25 themes from the Bootswatch project (for example, the website uses the cosmo theme). Available themes include: default cerulean cosmo cyborg darkly flatly journal litera lumen lux materia minty morph pulse quartz sandstone simplex sketchy slate solar spacelab superhero united vapor yeti zephyr
    
# # Some options need to be set in format > revealjs
# format:
#   revealjs:
#     incremental: true #Incrementally reveal elements https://rstudio-conf-2022.github.io/get-started-quarto/materials/05-presentations.html#/lists
#     width: 1600
#     height: 900
#     #css: ["mystyle.css"]
#     default-image-extension: png
#     theme: serif #full list of available themes: beige blood dark default league moon night serif simple sky solarized
#     slide-level: 2 #to make slides scrollable.. Specifies that any heading with a ## (level 2) will create a new slide. You can adjust the slide-level value to control which heading levels create new slides.
#     scrollable: true
#     smaller: true
#     transition: fade
#     transition-speed: fast
#     reference-location: document #If you prefer that footnotes be included at the end of the document, specify the reference-location: document option
#     logo: Newcastlelaboratories_logo.png
#     #footer: "Footer text"
#     menu:
#       side: left #Navigation Menu location
#       width: normal    #Navigation Menu width
#       numbers: true 	#Add slide numbers to menu items.
#     slide-number: c/t #c/t = Slide number / total slides (default)
#     show-slide-number: all #all = Show slide numbers in all contexts (default)
#     embed-resources: true
#     standalone: true

#Some referencing options need to be set in bibliography:, csl:, and link-citations:
bibliography: biblio.bib  #Document bibliography (BibTeX or CSL). May be a single file or a list of files
csl: bmj.csl #Citation Style Language file to use for formatting references.
link-citations: true

#Some code chunk options need to be set in execute (credit: @rappa753)
execute:
  echo: FALSE #Include cell source code in rendered output. 
  warning: FALSE #If FALSE, all warnings will be printed in the console instead of the output document
  error: TRUE #By default, the code evaluation will not stop even in case of errors! If we want to stop on errors, we need to set this option to FALSE.
  message: FALSE #Whether to preserve messages emitted by message() (similar to the option warning
  cache: FALSE #use the cache option to cache the results of computations. You may however need to manually refresh the cache if you know that some other input (or even time) has changed sufficiently to warrant an update. To do this, render either individual files or an entire project using the --cache-refresh option, e.g. [terminal] quarto render mydoc.qmd --cache-refresh # single doc or [terminal] quarto render --cache-refresh # entire project

editor: source

# parameters for report

params:
  param1: "NA"
---

```{r project_setup}
#| eval: true
#| include: false
#| echo: false
#| error: false
#| message: false
#| label: project setup

source("./01_src/01_startup/01_initialise.R")
```

```{r functions}
#| eval: true
#| include: false
#| echo: false
#| error: false
#| message: false
#| label: wrangle

# data import -------------------------------------------------------------
source("./01_src/functions.R")
```

```{r data_import_apex_CRIRES}
#| eval: true
#| include: false
#| echo: false
#| error: false
#| message: false
#| label: data_import_apex_crires

##import data -----------------
source("./01_src/02_data_import/02_data_import - Apex CRIRES samples.R")
```

```{r wrangle - 03_wrangle - Apex CRIRES samples}
#| eval: true
#| include: false
#| echo: false
#| error: false
#| message: false
#| label: wrangle_apex_crires_results

## undertake basic wrangling
source("./01_src/03_wrangle/03_wrangle - Apex CRIRES samples.R")
```

```{r read database - eRecord data}
#| eval: true
#| include: false
#| echo: false
#| error: false
#| message: false
#| label: read_database_eRecord_data

## read database (of eRecord data) -----------------------------------------------------------
source("./01_src/02_data_import/02_data_import - read database.R")
```

```{r merge_data_to_create_antimicrobial_pool}
#| eval: true
#| include: false
#| echo: false
#| error: false
#| message: false
#| label: merge_data_to_create_antimicrobial_pool

## create data_antimicrobial_pool
source("./01_src/03_wrangle/03_wrangle - merge_data_to_create_antimicrobial_pool.R")
```

```{r wrangle - 03_wrangle - point_prevalence_survey.R}
#| eval: true
#| include: false
#| echo: false
#| error: false
#| message: false
#| label: wrangle-point_prevalence_survey

source("./01_src/03_wrangle/03_wrangle - point_prevalence_survey.R")
```

```{r Apex_CRIRES_samples_JOIN_TO_data_antimicrobial_pool}
#| eval: true
#| include: false
#| echo: false
#| error: false
#| message: false
#| label: Apex_CRIRES_samples_JOIN_TO_data_antimicrobial_pool

## Joint 03_wrangle - Apex CRIRES samples TO data_antimicrobial_pool ---------------
source("./01_src/03_wrangle/03_wrangle - Apex CRIRES samples JOIN TO data_antimicrobial_pool.R")
```

# Quick summary

This report aims to streamline and automate antimicrobial stewardship processes at The Newcastle Upon Tyne Hospitals NHS Foundation Trust (NUTH) by linking critical-flagged blood culture data with data on inpatients' antimicrobial prescriptions. 

Data are extracted from both the Laboratory Information Management System (LIMS) and the Nautilus data warehouse, which sources information from the Trust’s electronic patient record (EPR), Oracle Health Millennium (eRecord). 

Extracts include data on all critical-flagged blood cultures received in the last 14 days & data on antimicrobial prescriptions for an indication other than “prophylaxis” made in the last 7 days for current inpatients at RVI, FH, GNCH, and NCCC who have been admitted for at least 24 hours. 

All data extraction, wrangling, analysis, reporting and publication is undertaken using [R programming](https://nhsrcommunity.com/). This approach facilitates regular oversight of antimicrobial use and supports evidence-based clinical decision-making.

::: {.callout-note collapse="true"}

# Introduction

Blood cultures flagged as critical (using the CRIRES flag in the laboratory information management system, LIMS) represent some of the most clinically significant infections requiring appropriate intervention by infection specialists. 

[Rapidly rising antimicrobial resistance (AMR) rates](https://nhs.sharepoint.com/:u:/r/sites/msteams_c1e724/Shared%20Documents/Data%20science/Data%20science%20intranet%20site/ams-penicillin-allergy-delabelling-report/index.html?csf=1&web=1&e=modvEc), combined with  the increasing complexity and frailty of our inpatient population, mean that the empirical management of sepsis increasingly necessitates the use of high-cost, broad-spectrum, or last-resort antimicrobials. 

Blood culture results are critical in supporting antimicrobial stewardship (AMS) activities, including switching from empirical to targeted therapy, and facilitating safe IV to oral switches. 

This analysis aims to facilitate antimicrobial review across The Newcastle Upon Tyne Hospitals NHS Foundation Trust (NUTH) using [R programming](https://nhsrcommunity.com/). 

By extracting and analysing relevant data stored in different systems, we can unlock clinical insights through data triangulation. Multi-source data analysis effectively facilitates the creation of a comprehensive dataset that streamlines the auditing process and provide valuable insights into antimicrobial prescribing practices.

Specifically, by linking critical blood culture data stored in the LIMS with comprehensive antimicrobial prescribing data stored in the Nautilus Data Warehouse, we can better understand- and influence prescribing patterns in some of our most critically unwell patients.

This automated approach will streamline the auditing process and help establish a robust governance framework around antimicrobial prescribing whilst ensuring that clinical decision-making remains evidence-based and patient-centred.

# Aims

- To semi-automate the process of undertaking antimicrobial audits.

- To help identify opportunities for de-escalation or discontinuation of antimicrobial therapy.

- To help identify patients prescribed inappropriate antimicrobial therapy given their blood culture results.

- To influence AMS efforts by facilitating surveillance and clinical review of antimicrobial usage.

- To facilitate evaluation of compliance with local and national antimicrobial prescribing guidelines. 

- Extract and analyse data on all critical-flagged blood cultures.

- Link critical blood culture episodes to concurrent antimicrobial prescribing data.

- Establish baseline data for monitoring the clinical effectiveness of high-cost antimicrobial interventions, given patients' blood culture results. 

- Create automated reporting mechanisms to support AMS team oversight of relatively costly antimicrobial usage

# Methods

The Nautilus data warehouse was interrogated to extract relevant data from the Trust's electronic patient record (EPR), Oracle Health Millennium (also known as eRecord). Each data extract includes information on: current inpatients at RVI, FH, GNCH and NCCC, who have been in hospital at least 24 hours, and have had a new medication prescribed as an inpatient within the 7 days prior to the query being run.

The LIMS database was interrogated to extract data on critical-flagged blood culture results.

The two datasets were linked using patients' MRN numbers by means of [Open-source ](https://nhsdigital.github.io/rap-community-of-practice/introduction_to_RAP/what-is-open-source/) data science tools, including [R programming](https://nhsrcommunity.com/). 

For further information, see the [NUTH Data Science Intranet Site](https://nhs.sharepoint.com/sites/msteams_c1e724/NUTH%20Data%20Science%20Intranet%20Site/). 

:::

### Limitations

The analysis is subject to several constraints:  

- **Data quality** depends on accurate manual flagging, EPR data entry, and complexity in prescription capture, with possible gaps in antimicrobial details and prescription versions.

- **Scope** is restricted to inpatient prescribing, with limited ability to assess the underlying clinical rationale or treatment effectiveness due to missing context only available from manual record review.

- **Temporal validity** is limited, as weekly data snapshots may miss long-term or seasonal trends.

- **System issues** include the absence of standardised documentation for high-cost antimicrobial decisions and potential misalignment between patient location and prescription origin.

::: {.callout-note collapse="true"}

### Further details

#### Data Quality and Availability:

- Reliance on accurate manual flagging of CRIRES status by laboratory staff.

- Potential for incomplete capture of all antimicrobial permutations due to the complexity of the prescribing system used at NUTH.

- Dependency on accurate EPR data entry and coding.

- Only antimicrobial prescriptions that include the drug frequency are included

- Prescribing data includes every version of each drug prescription; e.g. both stat/once-only AND regular prescriptions; and prescriptions where the route of administration/dose/duration/indication/etc.. has been modified (e.g. IV to oral switches).

- Patients' latest inpatient location may not reflect the location of antimicrobial prescription (e.g. many antimicrobials are often prescribed in RVED and RVAS for inpatients who subsequently move to other wards across the Trust).

#### Scope and Clinical Context:

- Analysis limited to inpatient prescribing.

- Although "Indication" data for each antimicrobial prescription is captured, the actual clinical rationale behind prescribing decisions depends on additional clinical information that is only available through manual review of patients' records.

- Limited ability to assess clinical outcomes and treatment effectiveness within current data scope

#### Temporal and External Validity:

- Weekly snapshot analysis may not capture longer-term prescribing trends or seasonal variations

#### System and Process-Related Issues:

- Current lack of standardised documentation for high-cost antimicrobial decision-making rationale

:::

# Results

- This report focuses on data extracted on **`r format(ymd(import_date_report), '%A %d %B %Y')`** 

::: {.callout-note collapse="true"}

## Further details

- Earliest admission date for patients in this cohort: **`r format(start_date_admission_dt, "%d %B %Y")`**

- Latest admission date for patients in this cohort: **`r format(end_date_admission_dt, "%d %B %Y")`**

- Total current inpatients at RVI, FH, GNCH and NCCC, who have been in hospital at least 24 hours, prescribed any medications, in hospital, in the 7 days prior to `r format(ymd(import_date_report), '%A %d %B %Y')`: **`r length(data_cohort_admission_wrangled_mrn)`**

- Total current inpatients at RVI, FH, GNCH and NCCC, who have been in hospital at least 24 hours, prescribed any antimicrobials for an indication other than “prophylaxis”, in hospital, in the 7 days prior to `r format(ymd(import_date_report), '%A %d %B %Y')`: **`r length(data_medications_antimicrobials_mrn)`**

:::

::: {.panel-tabset}

## All Antimicrobial Prescriptions

Line list of antimicrobial prescriptions for an indication other than “prophylaxis”, placed within the 7 days prior to `r format(ymd(import_date_report), '%A %d %B %Y')`, for current inpatients at RVI, FH, GNCH and NCCC, who have been in hospital at least 24 hours.

[See Limitations section](#limitations)

```{r data_antimicrobial_pool_for_table}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: data_antimicrobial_pool_for_table

# using function created in 01_src/functions.R

not_as_factor <- c("mrn", "initials", "indication", "fin")
interactive_table(data_antimicrobial_pool_for_table_dedup |> 
mutate(age = round(age)), nrow = 5, not_as_factor = not_as_factor)
```

## All Critical-Flagged, Positive Blood Cultures

Data for critical-flagged blood cultures received in the 14 days prior to `r format(ymd(import_date_report), '%A %d %B %Y')`, leading to the isolation of an organism.

[See Limitations section](#limitations)

```{r data_crires_bc_wrangled_wide_for_table}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: data_crires_bc_wrangled_wide_for_table

# using function created in 01_src/functions.R

not_as_factor <- c("mrn", "specimen_no", "consultant", "`current/intended antibiotic therapy`", "`anatomical site sampled`", "`indwelling device nature (if applicable)`")
interactive_table(data_crires_bc_wrangled_wide_for_table |> 
                    arrange(desc(location_code), mrn, `receive date`), nrow = 5, not_as_factor = not_as_factor)
```

## Linking Antimicrobial Prescription & Blood Culture Data

Triangulates data on:

1) All antimicrobial prescriptions for an indication other than “prophylaxis”, placed within the 7 days prior to `r format(ymd(import_date_report), '%A %d %B %Y')`, for current inpatients at RVI, FH, GNCH and NCCC, who have been in hospital at least 24 hours; and

2) All critical-flagged, positive blood cultures, received in the 14 days prior to `r format(ymd(import_date_report), '%A %d %B %Y')`.

[See Limitations section](#limitations)

```{r data_crires_bc_antimicrobials_longer_table}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: data_crires_bc_antimicrobials_longer_table

# using function created in 01_src/functions.R

not_as_factor <- c("mrn", "specimen_no")
interactive_table(data_crires_bc_antimicrobials_longer_table |>
                    arrange(desc(ward), mrn, `receive date`), nrow = 5, not_as_factor = not_as_factor)
```

## Collection location

Data for critical-flagged blood cultures received in the 14 days prior to `r format(ymd(import_date_report), '%A %d %B %Y')`, leading to the isolation of an organism.

[See Limitations section](#limitations)

```{r location_code}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: location_code

# location_code ----------
data_crires_bc_wrangled_wide %>%
  distinct(mrn, specimen_no, .keep_all = TRUE) |>
  filter(!is.na(location_code)) |>
  count(location_code) |> 
  ggplot(aes(fct_reorder(location_code, -n), n)) +
  geom_col() +
  theme_minimal() +
  labs(
    title = "Specimen collection location for patients with critical-flagged blood cultures",
    subtitle = glue::glue("Data for the 14 days prior to {date}",
                          date = format(ymd(crires_results_dates$most_rececent_receive_date), "%A %d %B %Y")
    ),
    x = NULL,
    y = "n"
  ) +
  coord_flip()
```

## Multiple prescriptions

Number of patients prescribed more than one antimicrobial for an indication other than “prophylaxis” within the 7 days prior to `r format(ymd(import_date_report), '%A %d %B %Y')`: `r n_patients_multi_abx`

```{r multi_abx}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: multi_abx

# using function created in 01_src/functions.R

not_as_factor <- c("mrn")
interactive_table(multi_abx, nrow = 5, not_as_factor = not_as_factor)
```

## High-use wards

Figure showing percentage of inpatients prescribed antimicrobials  for an indication other than “prophylaxis” within the 7 days prior to `r format(ymd(import_date_report), '%A %d %B %Y')`, per ward.

[See Limitations section](#limitations)

```{r perc_pt_with_antimicrobial_rx_per_ward}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: perc_pt_with_antimicrobial_rx_per_ward

# Calc perc pt with antimicrobial rx per ward -----------------------------
## excl prophylactic antimicrobials
## only including IV/IM/PO antimicrobials
## only incl wards with more than the median percentage of patients Rx IV/IM/PO antimicrobials and >4 patients Rx IV/IM/PO antimicrobials

perc_pt_on_rx_per_ward_restricted |>
  filter(!is.na(perc_pt_on_rx_per_ward)) |>
  ggplot() +
  geom_col(aes(fct_reorder(current_ward, perc_pt_on_rx_per_ward, .na_rm = FALSE), perc_pt_on_rx_per_ward)) +
  geom_hline(
    yintercept = unique(perc_pt_on_rx_per_ward$median_perc_pt_on_rx_per_ward),
    color = "red",
    linetype = 2
  ) +
  coord_flip() +
  # theme(axis.text.y = element_text(angle = 45, hjust = 1)) +
  # theme(aspect.ratio = 0.5) + # Adjust the aspect ratio as needed to make figure taller
  # theme(axis.text.y = element_text(size = 6)) +  # Reduce X-axis text size to 8
  labs(
    x = "Ward",
    y = "Patients prescribed antimicrobials (%)",
    title = "Percentage of Patients prescribed Antimicrobials per Ward",
    caption = "Data restricted to include only wards with both: \na) More than the median percentage of patients prescribed IV/IM/PO antimicrobials; and b) > 4 patients prescribed IV/IM/PO antimicrobials \nMedian percentage of patients prescribed antimicrobials across all wards shown by red dotted line",
    subtitle = glue::glue('Data for inpatients prescribed IV/IM/PO antimicrobials, in hospital, \nin the 7 days prior to {date},\nexcluding antimicrobial prescriptions with indication mentioning "Prophylaxis"',
      date = format(ymd(import_date_report), "%A %d %B %Y")
    )
  )
```

## Age-related data

Age of inpatients prescribed antimicrobials for an indication other than “prophylaxis” within the 7 days prior to `r format(ymd(import_date_report), '%A %d %B %Y')`.

[See Limitations section](#limitations)

```{r age_histogram}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: age_histogram

# histogram age
data_antimicrobial_pool %>%
  distinct(mrn, .keep_all = TRUE) |>
  filter(!is.na(age_on_admission)) %>%
  ggplot(aes(x = age_on_admission)) +
  geom_histogram(bins = 20) +
  theme_minimal() +
  labs(
    title = "Age of inpatients prescribed antimicrobials",
    subtitle = glue::glue('Data for inpatients prescribed IV/IM/PO antimicrobials, in hospital, \nin the 7 days prior to {date},\nexcluding antimicrobial prescriptions with indication mentioning "Prophylaxis"',
      date = format(ymd(import_date_report), "%A %d %B %Y")
    ),
    x = "Age on admission",
    y = "n"
  )
```

## Aztreonam prescriptions

Patients with critical-flagged blood cultures leading to the isolation of Gram-negative organisms within the last 14 days

[See Limitations section](#limitations)

```{r data_crires_bc_antimicrobials_filtered_aztreonam}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: data_crires_bc_antimicrobials_filtered_aztreonam

data_crires_bc_antimicrobials_filtered |> 
  filter_antibiotics_for_gram_neg_orgs("Aztreonam")
```

<!-- ## Cefiderocol prescriptions -->

<!-- Patients with critical-flagged blood cultures leading to the isolation of Gram-negative organisms within the last 14 days -->

<!-- [See Limitations section](#limitations) -->

<!-- ```{r data_crires_bc_antimicrobials_filtered_cefiderocol} -->
<!-- #| eval: true -->
<!-- #| include: true -->
<!-- #| echo: false -->
<!-- #| error: false -->
<!-- #| message: false -->
<!-- #| label: data_crires_bc_antimicrobials_filtered_cefiderocol -->

<!-- data_crires_bc_antimicrobials_filtered |>  -->
<!--   filter_antibiotics_for_gram_neg_orgs("Cefider") -->
<!-- ``` -->

## Chloramphenicol prescriptions

Patients with critical-flagged blood cultures leading to the isolation of Gram-negative organisms within the last 14 days

[See Limitations section](#limitations)

```{r data_crires_bc_antimicrobials_filtered_chloramphenicol}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: data_crires_bc_antimicrobials_filtered_chlor

data_crires_bc_antimicrobials_filtered |> 
  filter_antibiotics_for_gram_neg_orgs("Chlor")
```

## Ertapenem prescriptions

Patients with critical-flagged blood cultures leading to the isolation of Gram-negative organisms within the last 14 days

[See Limitations section](#limitations)

```{r data_crires_bc_antimicrobials_filtered_ertapenem}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: data_crires_bc_antimicrobials_filtered_ertapenem

data_crires_bc_antimicrobials_filtered |> 
  filter_antibiotics_for_gram_neg_orgs("Erta")
```

## Gentamicin prescriptions

Patients with critical-flagged blood cultures leading to the isolation of Gram-negative organisms within the last 14 days

[See Limitations section](#limitations)

```{r data_crires_bc_antimicrobials_filtered_gentamicin}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: data_crires_bc_antimicrobials_filtered_gentamicin

data_crires_bc_antimicrobials_filtered |> 
  filter_antibiotics_for_gram_neg_orgs("Gent")
```

## Meropenem prescriptions

Patients with critical-flagged blood cultures leading to the isolation of Gram-negative organisms within the last 14 days

[See Limitations section](#limitations)

```{r data_crires_bc_antimicrobials_filtered_meropenem}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: data_crires_bc_antimicrobials_filtered_meropenem

data_crires_bc_antimicrobials_filtered |> 
  filter_antibiotics_for_gram_neg_orgs("Mero")
```

## Tazocin prescriptions

Patients with critical-flagged blood cultures leading to the isolation of Gram-negative organisms within the last 14 days

[See Limitations section](#limitations)

```{r data_crires_bc_antimicrobials_filtered_tazocin}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: data_crires_bc_antimicrobials_filtered_tazocin

data_crires_bc_antimicrobials_filtered |> 
  filter_antibiotics_for_gram_neg_orgs("Piper")
```

## Temocillin prescriptions

Patients with critical-flagged blood cultures leading to the isolation of Gram-negative organisms within the last 14 days

[See Limitations section](#limitations)

```{r data_crires_bc_antimicrobials_filtered_temocillin}
#| eval: true
#| include: true
#| echo: false
#| error: false
#| message: false
#| label: data_crires_bc_antimicrobials_filtered_temocillin

data_crires_bc_antimicrobials_filtered |> 
  filter_antibiotics_for_gram_neg_orgs("Temo")
```

<!-- ## Tigecycline prescriptions -->

<!-- Patients with critical-flagged blood cultures leading to the isolation of Gram-negative organisms within the last 14 days -->

<!-- [See Limitations section](#limitations) -->

<!-- ```{r data_crires_bc_antimicrobials_filtered_tigecycline} -->
<!-- #| eval: true -->
<!-- #| include: true -->
<!-- #| echo: false -->
<!-- #| error: false -->
<!-- #| message: false -->
<!-- #| label: data_crires_bc_antimicrobials_filtered_tigecycline -->

<!-- data_crires_bc_antimicrobials_filtered |>  -->
<!--   filter_antibiotics_for_gram_neg_orgs("Tigec") -->
<!-- ``` -->

:::

<!-- ## References {.unnumbered} -->

<!-- ::: {#refs} -->
<!-- ::: -->

<!-- # Appendix {.unnumbered} -->

```{r beepr_finished}
beepr::beep(3)
```
