This repository contains the open-source implementation of the **Reproducible Analytical Pipeline (RAP)** developed for the Newcastle upon Tyne Hospitals NHS Foundation Trust (NUTH). The RAP is designed to deliver patient-level analytics and improve clinical decision-making by integrating, analysing, and visualising data from multiple sources.

## Overview

The goal of this project is to demonstrate the capabilities of full open-source software (FOSS) like R, SQL, and Quarto in addressing challenges faced by NHS trusts. The datasets and scripts shared here illustrate how sophisticated analytical pipelines can be developed even in resource-constrained environments, ultimately leading to improved patient outcomes.

The RAP 
- leverages the Trust's Nautilus clinical data warehouse; and
- integrates data from multiple sources such as:
  - Oracle Health Electronic Patient Records (EPR)
  - Laboratory Information Management System (LIMS)
  - Genetics LIMS

The Reproducible Analytical Pipeline integrates this data and delivers interactive, patient-level insights through HTML reports, hosted on a secure intranet website.

## Key Features

- **Open-source tools**: Built with RStudio, R programming, Quarto, and SQL for full reproducibility and transparency.
- **Interactive Reports**: Generates HTML reports using Quarto.
- **Data Security**: Enforces strict governance to ensure appropriate security for sensitive clinical data.
- **Version Control**: Integration with GitHub for streamlined version control and collaboration.
- **Impactful Analytics**:
    - Enhanced oversight of evidence-based prescribing
    - Advanced infection surveillance and quick intervention
    - Improved laboratory quality processes with better resource allocation through actionable insights.

## Example Reports

The following are example reports generated by the RAP platform currently being used at NUTH:

1. [Critical blood culture results and antimicrobial therapy](https://datascience.xnuth.nhs.uk/ams-critical-results-and-antimicrobial-therapy-report/#report-information): Links critical blood culture findings with recent antimicrobial therapy prescribed to current inpatients. 
2. [Antimicrobial expenditure tracking](https://datascience.xnuth.nhs.uk/ams-antimicrobial-expenditure-tracking/): Tracks ward-level antimicrobial spending.
3. [MRSA admission screening compliance](https://datascience.xnuth.nhs.uk/ams-mrsa-screening-compliance-report/#interactive-table): Monitors MRSA screening adherence and highlights compliance issues.
4. [Blood culture antimicrobial resistance analysis](https://datascience.xnuth.nhs.uk/lab-blood-culture-isolate-resistance-report/#predicted-antimicrobial-resistance-rates): Uses R to predict antimicrobial resistance rates based on blood culture susceptibility data.

## Quick Start

To explore the scripts and examples provided in this repository:

1. [Clone the repository](https://docs.github.com/en/repositories/creating-and-managing-repositories/cloning-a-repository):  
    ```bash
    git clone https://github.com/send2dan/AMS-eRecord-data-copy.git
    ```

2. Install the required dependencies for R and setup Quarto. Refer to the [Quarto installation guide](https://quarto.org/docs/get-started/).

3. Explore and run the provided scripts to understand how the RAP processes data.

## Contribution

Anyone interested in contributing, replicating, or adapting the RAP is welcome to do so. Please feel free to contact **Daniel Weiand** for further guidance:

- **Email**: [dweiand@nhs.net](mailto:dweiand@nhs.net)
- **GitHub**: [https://github.com/send2dan/public](GitHub public repo)
